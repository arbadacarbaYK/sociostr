{"ast":null,"code":"import _objectSpread from\"/home/arbadacarba/Downloads/sociostr/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{MapContainer,TileLayer,Marker,Popup}from'react-leaflet';import{Icon}from'leaflet';import axios from'axios';import{bech32}from'bech32';import'leaflet/dist/leaflet.css';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[mapCenter,setMapCenter]=useState([0,0]);const[mapZoom,setMapZoom]=useState(2);const[stats,setStats]=useState({totalUsers:0,usersWithLocation:0,uniqueCountries:0});const[autoUpdateEnabled,setAutoUpdateEnabled]=useState(true);const[lastUpdate,setLastUpdate]=useState(null);const[isUpdating,setIsUpdating]=useState(false);const[lastUpdateTimestamp,setLastUpdateTimestamp]=useState(null);const updateIntervalRef=useRef(null);// Convert hex pubkey to npub\nconst hexToNpub=hex=>{try{const words=bech32.toWords(Buffer.from(hex,'hex'));return bech32.encode('npub',words);}catch(error){console.error('Error converting hex to npub:',error);return hex;}};// Create user icon with activity type colors\nconst createUserIcon=activityType=>{let color='#9b59b6';// purple for profile\nif(activityType==='post')color='#e67e22';// orange for posts\nif(activityType==='zap')color='#f1c40f';// yellow for zaps\nreturn new Icon({iconUrl:\"data:image/svg+xml;base64,\".concat(btoa(\"\\n        <svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n          <circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"10\\\" fill=\\\"\".concat(color,\"\\\" stroke=\\\"#000\\\" stroke-width=\\\"2\\\"/>\\n          <circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"4\\\" fill=\\\"#fff\\\"/>\\n        </svg>\\n      \"))),iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-12]});};// Update stats\nconst updateStats=userList=>{const usersWithLocation=userList.filter(user=>user.location&&user.location.latitude&&user.location.longitude&&user.location.method!=='fallback');const uniqueCountries=new Set(usersWithLocation.map(user=>user.location.method).filter(method=>method&&method!=='fallback'&&method!=='unknown')).size;setStats({totalUsers:userList.length,usersWithLocation:usersWithLocation.length,uniqueCountries});};// Clean up inactive users\nconst cleanupInactiveUsers=()=>{setUsers(prevUsers=>{const fiveMinutesAgo=Date.now()-5*60*1000;const activeUsers=prevUsers.filter(user=>user.lastSeen&&user.lastSeen>fiveMinutesAgo);if(activeUsers.length!==prevUsers.length){console.log(\"Cleaned up \".concat(prevUsers.length-activeUsers.length,\" inactive users\"));updateStats(activeUsers);}return activeUsers;});};// Start auto-update\nconst startAutoUpdate=()=>{if(updateIntervalRef.current){clearInterval(updateIntervalRef.current);}updateIntervalRef.current=setInterval(()=>{if(autoUpdateEnabled&&!loading&&!isUpdating){console.log('Auto-updating users...');setLastUpdateTimestamp(Date.now());fetchUsers(true);cleanupInactiveUsers();}},2*60*1000);// 2 minutes\n};// Stop auto-update\nconst stopAutoUpdate=()=>{if(updateIntervalRef.current){clearInterval(updateIntervalRef.current);updateIntervalRef.current=null;}};// Fetch users from backend\nconst fetchUsers=async function(){let isAutoUpdate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(isAutoUpdate){setIsUpdating(true);}else{setLoading(true);setError(null);setUsers([]);}try{const baseURL=process.env.NODE_ENV==='production'?'https://nostr-sociograph-backend.onrender.com':'http://localhost:3000';const params=isAutoUpdate&&lastUpdateTimestamp?{since:Math.floor(lastUpdateTimestamp/1000)}:{};const response=await axios.get(\"\".concat(baseURL,\"/api/nostr-users\"),{params});const{users:fetchedUsers}=response.data;if(fetchedUsers.length===0){if(isAutoUpdate){console.log('No new users found during auto-update');setIsUpdating(false);setLastUpdate(new Date());}else{setError('No users found. Please try again later.');setLoading(false);}return;}// Process users with timestamps\nconst processedUsers=fetchedUsers.map(user=>_objectSpread(_objectSpread({},user),{},{lastSeen:Date.now()}));if(isAutoUpdate){setUsers(prevUsers=>{const existingPubkeys=new Set(prevUsers.map(user=>user.pubkey));const uniqueNewUsers=processedUsers.filter(user=>!existingPubkeys.has(user.pubkey));const newUsersWithTimestamp=uniqueNewUsers.map(user=>_objectSpread(_objectSpread({},user),{},{lastSeen:Date.now()}));const newPubkeys=new Set(processedUsers.map(user=>user.pubkey));const updatedExistingUsers=prevUsers.map(user=>newPubkeys.has(user.pubkey)?_objectSpread(_objectSpread({},user),{},{lastSeen:Date.now()}):user);const fiveMinutesAgo=Date.now()-5*60*1000;const activeUsers=updatedExistingUsers.filter(user=>user.lastSeen&&user.lastSeen>fiveMinutesAgo);const finalUsers=[...activeUsers,...newUsersWithTimestamp];updateStats(finalUsers);return finalUsers;});}else{setUsers(processedUsers);updateStats(processedUsers);}}catch(err){console.error('Error fetching users:',err);setError('Failed to fetch users. Please check if the server is running.');}finally{if(!isAutoUpdate){setLoading(false);}if(isAutoUpdate){setLastUpdate(new Date());setIsUpdating(false);}else{const now=Date.now();setLastUpdateTimestamp(now);startAutoUpdate();}}};// Get user location\nuseEffect(()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{const{latitude,longitude}=position.coords;setMapCenter([latitude,longitude]);setMapZoom(6);},error=>{console.log('Geolocation error:',error);setMapCenter([0,0]);setMapZoom(2);});}else{setMapCenter([0,0]);setMapZoom(2);}},[]);// Cleanup on unmount\nuseEffect(()=>{return()=>{stopAutoUpdate();};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83C\\uDF10 Sociostr\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Users: \",stats.totalUsers]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"With Location: \",stats.usersWithLocation]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Countries: \",stats.uniqueCountries]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchUsers(false),disabled:loading,className:\"load-button\",children:loading?'Loading...':'Load Nostr Users'}),/*#__PURE__*/_jsxs(\"div\",{className:\"control-group\",children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'8px',color:'#cccccc',fontSize:'0.9rem'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:autoUpdateEnabled,onChange:e=>{setAutoUpdateEnabled(e.target.checked);if(e.target.checked&&users.length>0){startAutoUpdate();}else{stopAutoUpdate();}},style:{width:'16px',height:'16px',accentColor:'#9b59b6',backgroundColor:'#333',border:'2px solid #666',borderRadius:'3px'}}),\"Auto-update (2 min)\"]}),lastUpdate&&/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.7rem',color:'#aaaaaa',marginTop:'0.5rem'},children:[\"Last update: \",Math.floor((Date.now()-lastUpdate.getTime())/60000),\" minutes ago\"]}),isUpdating&&/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.7rem',color:'#9b59b6',display:'flex',alignItems:'center',gap:'5px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"loading-spinner\",style:{width:'12px',height:'12px',border:'2px solid #9b59b6',borderTopColor:'transparent',borderRadius:'50%',animation:'spin 1s linear infinite'}}),\"Updating...\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-color\",style:{backgroundColor:'#9b59b6'}}),/*#__PURE__*/_jsx(\"span\",{children:\"Profile Updates\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-color\",style:{backgroundColor:'#e67e22'}}),/*#__PURE__*/_jsx(\"span\",{children:\"Posts\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-color\",style:{backgroundColor:'#f1c40f'}}),/*#__PURE__*/_jsx(\"span\",{children:\"Zaps\"})]})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[error,/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchUsers(false),children:\"Try Again\"})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Loading Nostr Users...\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Fetching active users (profiles, posts, zaps) from Nostr relays\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You can zoom and pan the map while loading, but it may be slow\"})]})}),!loading&&!error&&mapCenter&&/*#__PURE__*/_jsxs(MapContainer,{center:mapCenter,zoom:mapZoom,style:{height:'100vh',width:'100%'},zoomDelta:0.5,zoomSnap:0.5,attributionControl:false,children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\",attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors \\xA9 <a href=\\\"https://carto.com/attributions\\\">CARTO</a>\",maxZoom:18,subdomains:\"abcd\",tileSize:256,zoomOffset:0,updateWhenZooming:false,keepBuffer:2,maxNativeZoom:18}),users.map(user=>{var _user$location,_user$location2;if(!((_user$location=user.location)!==null&&_user$location!==void 0&&_user$location.latitude)||!((_user$location2=user.location)!==null&&_user$location2!==void 0&&_user$location2.longitude))return null;return/*#__PURE__*/_jsx(Marker,{position:[user.location.latitude,user.location.longitude],icon:createUserIcon(user.activityType),children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-popup\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://nostr.com/\".concat(hexToNpub(user.pubkey)),target:\"_blank\",rel:\"noopener noreferrer\",style:{color:'#9b59b6',textDecoration:'none'},children:user.display_name||user.name||'Unknown User'})}),user.about&&/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.8rem',color:'#cccccc',margin:'0.5rem 0'},children:user.about.length>100?\"\".concat(user.about.substring(0,100),\"...\"):user.about}),/*#__PURE__*/_jsxs(\"div\",{className:\"location\",style:{fontSize:'0.7rem',color:'#aaaaaa',marginTop:'0.5rem'},children:[\"Location Accuracy: \",user.location.confidence?(user.location.confidence*100).toFixed(0)+'%':'Unknown']}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.7rem',color:'#aaaaaa',marginTop:'0.5rem'},children:[\"Activity: \",user.activityType]})]})})},user.pubkey);})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',bottom:'10px',left:'10px',right:'10px',textAlign:'center',zIndex:1000,pointerEvents:'none'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#666',fontSize:'0.7rem',marginBottom:'4px'},children:\"Built by Bitcoiners with \\uD83D\\uDC9C\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#444',fontSize:'0.6rem'},children:\"Leaflet | \\xA9 OpenStreetMap contributors \\xA9 CARTO\"})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","MapContainer","TileLayer","Marker","Popup","Icon","axios","bech32","jsx","_jsx","jsxs","_jsxs","App","users","setUsers","loading","setLoading","error","setError","mapCenter","setMapCenter","mapZoom","setMapZoom","stats","setStats","totalUsers","usersWithLocation","uniqueCountries","autoUpdateEnabled","setAutoUpdateEnabled","lastUpdate","setLastUpdate","isUpdating","setIsUpdating","lastUpdateTimestamp","setLastUpdateTimestamp","updateIntervalRef","hexToNpub","hex","words","toWords","Buffer","from","encode","console","createUserIcon","activityType","color","iconUrl","concat","btoa","iconSize","iconAnchor","popupAnchor","updateStats","userList","filter","user","location","latitude","longitude","method","Set","map","size","length","cleanupInactiveUsers","prevUsers","fiveMinutesAgo","Date","now","activeUsers","lastSeen","log","startAutoUpdate","current","clearInterval","setInterval","fetchUsers","stopAutoUpdate","isAutoUpdate","arguments","undefined","baseURL","process","env","NODE_ENV","params","since","Math","floor","response","get","fetchedUsers","data","processedUsers","_objectSpread","existingPubkeys","pubkey","uniqueNewUsers","has","newUsersWithTimestamp","newPubkeys","updatedExistingUsers","finalUsers","err","navigator","geolocation","getCurrentPosition","position","coords","className","children","onClick","disabled","style","display","alignItems","gap","fontSize","type","checked","onChange","e","target","width","height","accentColor","backgroundColor","border","borderRadius","marginTop","getTime","borderTopColor","animation","center","zoom","zoomDelta","zoomSnap","attributionControl","url","attribution","maxZoom","subdomains","tileSize","zoomOffset","updateWhenZooming","keepBuffer","maxNativeZoom","_user$location","_user$location2","icon","href","rel","textDecoration","display_name","name","about","margin","substring","confidence","toFixed","bottom","left","right","textAlign","zIndex","pointerEvents","marginBottom"],"sources":["/home/arbadacarba/Downloads/sociostr/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport { Icon } from 'leaflet';\nimport axios from 'axios';\nimport { bech32 } from 'bech32';\nimport 'leaflet/dist/leaflet.css';\nimport './App.css';\n\ninterface User {\n  pubkey: string;\n  name: string;\n  display_name?: string;\n  about?: string;\n  picture?: string;\n  location: {\n    latitude: number;\n    longitude: number;\n    confidence: number;\n    method: string;\n  };\n  activityType: 'profile' | 'post' | 'zap';\n  lastSeen: number;\n}\n\ninterface Stats {\n  totalUsers: number;\n  usersWithLocation: number;\n  uniqueCountries: number;\n}\n\nconst App: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [mapCenter, setMapCenter] = useState<[number, number]>([0, 0]);\n  const [mapZoom, setMapZoom] = useState(2);\n  const [stats, setStats] = useState<Stats>({ totalUsers: 0, usersWithLocation: 0, uniqueCountries: 0 });\n  const [autoUpdateEnabled, setAutoUpdateEnabled] = useState(true);\n  const [lastUpdate, setLastUpdate] = useState<Date | null>(null);\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [lastUpdateTimestamp, setLastUpdateTimestamp] = useState<number | null>(null);\n  const updateIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Convert hex pubkey to npub\n  const hexToNpub = (hex: string): string => {\n    try {\n      const words = bech32.toWords(Buffer.from(hex, 'hex'));\n      return bech32.encode('npub', words);\n    } catch (error) {\n      console.error('Error converting hex to npub:', error);\n      return hex;\n    }\n  };\n\n  // Create user icon with activity type colors\n  const createUserIcon = (activityType: string): Icon => {\n    let color = '#9b59b6'; // purple for profile\n    if (activityType === 'post') color = '#e67e22'; // orange for posts\n    if (activityType === 'zap') color = '#f1c40f'; // yellow for zaps\n\n    return new Icon({\n      iconUrl: `data:image/svg+xml;base64,${btoa(`\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"${color}\" stroke=\"#000\" stroke-width=\"2\"/>\n          <circle cx=\"12\" cy=\"12\" r=\"4\" fill=\"#fff\"/>\n        </svg>\n      `)}`,\n      iconSize: [24, 24],\n      iconAnchor: [12, 12],\n      popupAnchor: [0, -12]\n    });\n  };\n\n  // Update stats\n  const updateStats = (userList: User[]) => {\n    const usersWithLocation = userList.filter(user => \n      user.location && \n      user.location.latitude && \n      user.location.longitude &&\n      user.location.method !== 'fallback'\n    );\n    \n    const uniqueCountries = new Set(\n      usersWithLocation\n        .map(user => user.location.method)\n        .filter(method => method && method !== 'fallback' && method !== 'unknown')\n    ).size;\n\n    setStats({\n      totalUsers: userList.length,\n      usersWithLocation: usersWithLocation.length,\n      uniqueCountries\n    });\n  };\n\n  // Clean up inactive users\n  const cleanupInactiveUsers = () => {\n    setUsers(prevUsers => {\n      const fiveMinutesAgo = Date.now() - (5 * 60 * 1000);\n      const activeUsers = prevUsers.filter(user => \n        user.lastSeen && user.lastSeen > fiveMinutesAgo\n      );\n      \n      if (activeUsers.length !== prevUsers.length) {\n        console.log(`Cleaned up ${prevUsers.length - activeUsers.length} inactive users`);\n        updateStats(activeUsers);\n      }\n      \n      return activeUsers;\n    });\n  };\n\n  // Start auto-update\n  const startAutoUpdate = () => {\n    if (updateIntervalRef.current) {\n      clearInterval(updateIntervalRef.current);\n    }\n    updateIntervalRef.current = setInterval(() => {\n      if (autoUpdateEnabled && !loading && !isUpdating) {\n        console.log('Auto-updating users...');\n        setLastUpdateTimestamp(Date.now());\n        fetchUsers(true);\n        cleanupInactiveUsers();\n      }\n    }, 2 * 60 * 1000); // 2 minutes\n  };\n\n  // Stop auto-update\n  const stopAutoUpdate = () => {\n    if (updateIntervalRef.current) {\n      clearInterval(updateIntervalRef.current);\n      updateIntervalRef.current = null;\n    }\n  };\n\n  // Fetch users from backend\n  const fetchUsers = async (isAutoUpdate = false) => {\n    if (isAutoUpdate) {\n      setIsUpdating(true);\n    } else {\n      setLoading(true);\n      setError(null);\n      setUsers([]);\n    }\n\n    try {\n      const baseURL = process.env.NODE_ENV === 'production' \n        ? 'https://nostr-sociograph-backend.onrender.com'\n        : 'http://localhost:3000';\n      \n      const params = isAutoUpdate && lastUpdateTimestamp ? \n        { since: Math.floor(lastUpdateTimestamp / 1000) } : {};\n      \n      const response = await axios.get(`${baseURL}/api/nostr-users`, { params });\n      const { users: fetchedUsers } = response.data;\n      \n      if (fetchedUsers.length === 0) {\n        if (isAutoUpdate) {\n          console.log('No new users found during auto-update');\n          setIsUpdating(false);\n          setLastUpdate(new Date());\n        } else {\n          setError('No users found. Please try again later.');\n          setLoading(false);\n        }\n        return;\n      }\n\n      // Process users with timestamps\n      const processedUsers = fetchedUsers.map((user: any) => ({\n        ...user,\n        lastSeen: Date.now()\n      }));\n\n      if (isAutoUpdate) {\n        setUsers(prevUsers => {\n          const existingPubkeys = new Set(prevUsers.map(user => user.pubkey));\n          const uniqueNewUsers = processedUsers.filter((user: User) => !existingPubkeys.has(user.pubkey));\n          \n          const newUsersWithTimestamp = uniqueNewUsers.map((user: User) => ({\n            ...user,\n            lastSeen: Date.now()\n          }));\n          \n          const newPubkeys = new Set(processedUsers.map((user: User) => user.pubkey));\n          const updatedExistingUsers = prevUsers.map(user => \n            newPubkeys.has(user.pubkey) \n              ? { ...user, lastSeen: Date.now() }\n              : user\n          );\n          \n          const fiveMinutesAgo = Date.now() - (5 * 60 * 1000);\n          const activeUsers = updatedExistingUsers.filter(user => \n            user.lastSeen && user.lastSeen > fiveMinutesAgo\n          );\n          \n          const finalUsers = [...activeUsers, ...newUsersWithTimestamp];\n          updateStats(finalUsers);\n          return finalUsers;\n        });\n      } else {\n        setUsers(processedUsers);\n        updateStats(processedUsers);\n      }\n    } catch (err) {\n      console.error('Error fetching users:', err);\n      setError('Failed to fetch users. Please check if the server is running.');\n    } finally {\n      if (!isAutoUpdate) {\n        setLoading(false);\n      }\n      if (isAutoUpdate) {\n        setLastUpdate(new Date());\n        setIsUpdating(false);\n      } else {\n        const now = Date.now();\n        setLastUpdateTimestamp(now);\n        startAutoUpdate();\n      }\n    }\n  };\n\n  // Get user location\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const { latitude, longitude } = position.coords;\n          setMapCenter([latitude, longitude]);\n          setMapZoom(6);\n        },\n        (error) => {\n          console.log('Geolocation error:', error);\n          setMapCenter([0, 0]);\n          setMapZoom(2);\n        }\n      );\n    } else {\n      setMapCenter([0, 0]);\n      setMapZoom(2);\n    }\n  }, []);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      stopAutoUpdate();\n    };\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <div className=\"header\">\n        <h1>🌐 Sociostr</h1>\n        <div className=\"stats\">\n          <span>Users: {stats.totalUsers}</span>\n          <span>With Location: {stats.usersWithLocation}</span>\n          <span>Countries: {stats.uniqueCountries}</span>\n        </div>\n      </div>\n\n      <div className=\"controls\">\n        <button \n          onClick={() => fetchUsers(false)}\n          disabled={loading}\n          className=\"load-button\"\n        >\n          {loading ? 'Loading...' : 'Load Nostr Users'}\n        </button>\n\n        <div className=\"control-group\">\n          <label style={{ display: 'flex', alignItems: 'center', gap: '8px', color: '#cccccc', fontSize: '0.9rem' }}>\n            <input\n              type=\"checkbox\"\n              checked={autoUpdateEnabled}\n              onChange={(e) => {\n                setAutoUpdateEnabled(e.target.checked);\n                if (e.target.checked && users.length > 0) {\n                  startAutoUpdate();\n                } else {\n                  stopAutoUpdate();\n                }\n              }}\n              style={{\n                width: '16px',\n                height: '16px',\n                accentColor: '#9b59b6',\n                backgroundColor: '#333',\n                border: '2px solid #666',\n                borderRadius: '3px'\n              }}\n            />\n            Auto-update (2 min)\n          </label>\n          {lastUpdate && (\n            <p style={{ fontSize: '0.7rem', color: '#aaaaaa', marginTop: '0.5rem' }}>\n              Last update: {Math.floor((Date.now() - lastUpdate.getTime()) / 60000)} minutes ago\n            </p>\n          )}\n          {isUpdating && (\n            <p style={{ fontSize: '0.7rem', color: '#9b59b6', display: 'flex', alignItems: 'center', gap: '5px' }}>\n              <span className=\"loading-spinner\" style={{ width: '12px', height: '12px', border: '2px solid #9b59b6', borderTopColor: 'transparent', borderRadius: '50%', animation: 'spin 1s linear infinite' }}></span>\n              Updating...\n            </p>\n          )}\n        </div>\n\n        <div className=\"legend\">\n          <div className=\"legend-item\">\n            <div className=\"legend-color\" style={{ backgroundColor: '#9b59b6' }}></div>\n            <span>Profile Updates</span>\n          </div>\n          <div className=\"legend-item\">\n            <div className=\"legend-color\" style={{ backgroundColor: '#e67e22' }}></div>\n            <span>Posts</span>\n          </div>\n          <div className=\"legend-item\">\n            <div className=\"legend-color\" style={{ backgroundColor: '#f1c40f' }}></div>\n            <span>Zaps</span>\n          </div>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"error\">\n          {error}\n          <button onClick={() => fetchUsers(false)}>Try Again</button>\n        </div>\n      )}\n\n      {loading && (\n        <div className=\"loading-overlay\">\n          <div className=\"loading-content\">\n            <h3>Loading Nostr Users...</h3>\n            <p>Fetching active users (profiles, posts, zaps) from Nostr relays</p>\n            <p>You can zoom and pan the map while loading, but it may be slow</p>\n          </div>\n        </div>\n      )}\n\n      {!loading && !error && mapCenter && (\n        <MapContainer\n          center={mapCenter}\n          zoom={mapZoom}\n          style={{ height: '100vh', width: '100%' }}\n          zoomDelta={0.5}\n          zoomSnap={0.5}\n          attributionControl={false}\n        >\n          <TileLayer\n            url=\"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\"\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\n            maxZoom={18}\n            subdomains=\"abcd\"\n            tileSize={256}\n            zoomOffset={0}\n            updateWhenZooming={false}\n            keepBuffer={2}\n            maxNativeZoom={18}\n          />\n          \n          {users.map((user) => {\n            if (!user.location?.latitude || !user.location?.longitude) return null;\n            \n            return (\n              <Marker\n                key={user.pubkey}\n                position={[user.location.latitude, user.location.longitude]}\n                icon={createUserIcon(user.activityType)}\n              >\n                <Popup>\n                  <div className=\"user-popup\">\n                    <h3>\n                      <a \n                        href={`https://nostr.com/${hexToNpub(user.pubkey)}`} \n                        target=\"_blank\" \n                        rel=\"noopener noreferrer\"\n                        style={{ color: '#9b59b6', textDecoration: 'none' }}\n                      >\n                        {user.display_name || user.name || 'Unknown User'}\n                      </a>\n                    </h3>\n                    {user.about && (\n                      <p style={{ fontSize: '0.8rem', color: '#cccccc', margin: '0.5rem 0' }}>\n                        {user.about.length > 100 ? `${user.about.substring(0, 100)}...` : user.about}\n                      </p>\n                    )}\n                    <div className=\"location\" style={{ fontSize: '0.7rem', color: '#aaaaaa', marginTop: '0.5rem' }}>\n                      Location Accuracy: {user.location.confidence ? (user.location.confidence * 100).toFixed(0) + '%' : 'Unknown'}\n                    </div>\n                    <div style={{ fontSize: '0.7rem', color: '#aaaaaa', marginTop: '0.5rem' }}>\n                      Activity: {user.activityType}\n                    </div>\n                  </div>\n                </Popup>\n              </Marker>\n            );\n          })}\n        </MapContainer>\n      )}\n\n      <div style={{\n        position: 'absolute',\n        bottom: '10px',\n        left: '10px',\n        right: '10px',\n        textAlign: 'center',\n        zIndex: 1000,\n        pointerEvents: 'none'\n      }}>\n        <div style={{\n          color: '#666',\n          fontSize: '0.7rem',\n          marginBottom: '4px'\n        }}>\n          Built by Bitcoiners with 💜\n        </div>\n        <div style={{\n          color: '#444',\n          fontSize: '0.6rem'\n        }}>\n          Leaflet | © OpenStreetMap contributors © CARTO\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}